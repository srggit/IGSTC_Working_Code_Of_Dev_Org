<apex:page sidebar="false" showHeader="false" standardStylesheets="false"  docType="html-5.0" controller="ApplicantPortal_Contoller">
    <head>
        <c:Libraries /> 
        <script> 
                        var tabValues = JSON.parse('{!tabValues}');
                        var candidateId = '{!candidateId}';
                        var campaigntype = '{!campaigntype}';
                        var countrytype = JSON.parse('{!countrytype}');
                        var countryCode = JSON.parse('{!countryCode}');
                        var availingFellowship = JSON.parse('{!availingFellowship}');
                        var pairedApplicant = JSON.parse('{!pairedApplicant}');
                        var participantType = JSON.parse('{!participantType}');
                        var bankType = JSON.parse('{!bankType}');
                        var participatingWorkshop = JSON.parse('{!participatingWorkshop}');
                        var specialization = JSON.parse('{!specialization}');
                        var presentingWorkshop = JSON.parse('{!presentingWorkshop}');
                        var currencyType2 = JSON.parse('{!currencyType2}');
                        var siteURL = '{!ApplicantPortalSiteURL}';
                        var financialConDetails = JSON.parse('{!financialConDetails}');
                        var thematicAreaList = JSON.parse('{!thematicAreaList}');
                        var domainURL = '{!$Label.ApplicantPortalSiteURL}';
                        var contactId = '{!contactId}';
                        var secondstage = '{!secondstage}';
                        var emailVerified = '{!emailVerified}'; 
                        var isCoordinator='{!isCoordinator}';
                        var proposalStage = '{!proposalStage}';          
                        var gender = JSON.parse('{!gender}');
                        var applicantName = '{!applicantName}';
                        var applicantEmail = '{!applicantEmail}';
                        var country = JSON.parse('{!country}');
                        var nationality = JSON.parse('{!nationality}');
                        var available_followship = '{!available_followship}';
                        var associated_with_igstc = '{!associated_with_igstc}';
                        var isPrimaryContact='{!isPrimaryContact}';
                        var accountId='{!accountId}';
                        var natureOfThesisWork=JSON.parse('{!natureOfThesisWork}');
                        var natureOfPhDWork=JSON.parse('{!natureOfPhDWork}');
                        var percentCGPA=JSON.parse('{!percentCGPA}');
                        var states=JSON.parse('{!states}');
                        var campaignData='{!campaignData}';
                        var signDate='{!signDate}';
                        var currencyPickList=JSON.parse('{!currencyPickList}');
                        var partnerSubmission = '{!partnerSubmission}';
                        var proposalWrapperList = '{!proposalWrapperList}';

                        var yearList = JSON.parse('{!yearList}');//Added for Dropodown by Karthik

                        debugger;

                        var candidateId = '{!contactId}';
                        var candidateId = '{!$CurrentPage.parameters.id}';
            </script>
        <apex:stylesheet value="{!$Resource.ApplicantPortalCSS}" />
        <apex:stylesheet value="{!$Resource.ReviewerPortalCss}" />
        <apex:stylesheet value="{!$Resource.SlickThemeCSS}" />
        <apex:stylesheet value="{!$Resource.SlickCss}" />
    
        <apex:stylesheet value="{!$Resource.SmallCss}" />
        <apex:stylesheet value="{!$Resource.MediumCss}" />
        <apex:stylesheet value="{!$Resource.LargCss}" />
        <!--script src="{!$Resource.AngularMultiSelectDirective}" /-->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular-route.min.js"></script>
        <script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.13.0.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.7.0/lodash.min.js">
        </script>
        <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
        <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.1/css/bootstrap.min.css"/>
        <script src='https://ajax.googleapis.com/ajax/libs/angularjs/1.2.4/angular-sanitize.min.js'></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/textAngular/1.1.2/textAngular.min.js'></script>
        <script src="{!$Resource.datetimepicker}"></script>
        <c:Controllers />
        <!-- Override ApplicantPortal.js with ApplicantPortalV2.js (includes fixes) -->
        <apex:includeScript value="{!$Resource.ApplicantPortalV2}" />
        <style> 
        
/* body {
    background: #F5F5F5;
} */
 /* .card-img-left { */
    /*width: 45%;*/
    /* Link to your background image using in the property below! */
    /* background: scroll center url('https://source.unsplash.com/WEQbe2jBg40/414x512');
    background-size: 'cover'; */
/* } */
/*
.btn-login {
    font-size: 0.9rem;
    letter-spacing: 0.05rem;
    padding: 0.75rem 1rem;
}

.btn-google {
    color: white !important;
    background-color: #ea4335;
}

.btn-facebook {
    color: white !important;
    background-color: #3b5998;
}

.loadingBackground {
    position: fixed;
    height: 100%;
    width: 100%;
    background: #F6F6F6;
    z-index: 11111;
    opacity: 0.7;
    top: 0px;
    left: 0;
    bottom: 0;
    right: 0;
}
.loading {
    top: 50%;
    left: 50%;
    margin: -50px 0px 0px -50px;
    z-index: 111111;
    position: fixed;
}
.i-padding{
            padding-right: 10px;
        }
@media only screen and (min-width:850px) and (max-width:1000px){
    .padding_1000{
        padding-left:20px !important;
        padding-right:20px !important;
    }
}
@media only screen and (max-width: 750px) {
    @media screen and (min-device-width: 650px) and (max-device-width: 750px) { 
        .col{
            padding:unset;
        }
    }
    .col{
        flex-shrink: 0 !important;
        flex: unset;
        
    }
}
        </style>
        <c:Controllers />
        <style> 
            @media (min-width: 576px) {
        .h-sm-100 {
            height: 100%;
        }
        } */
        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            background-color: #f6f6fb;
            height: 100vh;
            display: flex;
            overflow: hidden;
        }

        /* Sidebar */
        .sidebar-appPortal {
            width: 240px;
            background-color: #fff;
            border-right: 1px solid #e0e0e0;
            display: flex;
            flex-direction: column;
            padding-top: 20px;
        }

        .sidebar-appPortal .logo {
            text-align: center;
            font-size: 22px;
            font-weight: bold;
            color: #4b0082;
            margin-bottom: 30px;
        }

        .nav-item {
            padding: 15px 25px;
            font-size: 15px;
            color: #444;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: background-color 0.3s;
        }

        .nav-item i {
            margin-right: 12px;
            font-size: 16px;
        }

        .nav-item:hover, .nav-item.active {
            background-color: #4b0082;
            color: #fff;
        }

        .bottom-nav {
            margin-top: auto;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            scrollbar-width: none;
        }

        .header {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            margin-bottom: 20px;
        }

        .header span {
            font-weight: 500;
            color: #333;
        }

        h2 {
            color: #4b0082;
            margin-top: 20px;
            font-size: 22px;
        }

        .card-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 10px;
        }

        .program-card {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            width: calc(33.33% - 13.33px);
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .program-icon {
            font-size: 20px;
            color: white;
            background-color: #4b0082;
            width: 38px;
            height: 38px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
        }

        .program-title {
            font-weight: 600;
            color: #333;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .program-deadline {
            font-size: 13px;
            color: #d32f2f;
            margin-bottom: 10px;
        }

        .program-desc {
            font-size: 14px;
            color: #555;
            margin-bottom: 15px;
        }

        .btn-container {
            margin-top: auto;
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            border: 1px solid #4b0082;
            background-color: white;
            color: #4b0082;
            transition: 0.3s;
        }

        .btn:hover {
            background-color: #4b0082;
            color: white;
        }
        .btn[disabled],
        .btn.ng-disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
            background-color:gray;
        }


        .main-div {
            display: flex;
            overflow: auto;
            scrollbar-width: none;
        }

        /* Loader CSS */
        .loader {
            height: 60px;
            aspect-ratio: 2;
            border-bottom: 3px solid #0000;
            background:
                linear-gradient(90deg, white 50%, transparent 0) -25% 100%/50% 3px repeat-x border-box;
            position: relative;
            animation: l3-0 .75s linear infinite;
        }

        .loader:before {
            content: "";
            position: absolute;
            inset: auto 42.5% 0;
            aspect-ratio: 1;
            border-radius: 50%;
            background: #4b0082;
            animation: l3-1 .75s cubic-bezier(0, 900, 1, 900) infinite;
        }

        @keyframes l3-0 {
            to {
                background-position: -125% 100%
            }
        }

        @keyframes l3-1 {
            0%,2% {
                bottom: 0%
            }

            98%,
            to {
                bottom: .1%
            }
        }

        /* Responsive */
        @media(max-width: 1024px) {
            .program-card {
                width: calc(50% - 10px);
            }
        }

        @media(max-width: 768px) {
            .program-card {
                width: 100%;
            }

            .sidebar-appPortal {
                width: 200px;
            }
        }
    </style>

    </head>
    <body ng-app="cp_app" ng-controller="cp_dashboard_ctrl" style="background-color: #ffffff; !important;">

    <div ng-if="isLoading">
        <div class="modal fade show d-block" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-dialog-centered justify-content-center" role="document">
                <span class="loader"></span>
            </div>
        </div>
        <div class="modal-backdrop fade show"></div>
    </div>
    <div ng-else="isLoading">
    <div ng-else="isLoading" class="main-div" ng-if="!$root.isRoutedView">
        <div class="sidebar-appPortal">
            <div class="logo">IGSTC</div>
            <div class="nav-item" ng-class="{active: selectedMenu === 'Dashboard'}" ng-click="showSection('Dashboard')">
                <i class="fa-solid fa-home"></i> Dashboard
            </div>
            <div class="nav-item" ng-class="{active: selectedMenu === 'Programs'}" ng-click="showSection('Programs')">
                <i class="fa-solid fa-list"></i> Programs
            </div>
            <div class="nav-item" ng-class="{active: selectedMenu === 'Help'}" ng-click="showSection('Help')">
                <i class="fa-solid fa-circle-question"></i> Get Help
            </div>
            <div class="nav-item" ng-class="{active: selectedMenu === 'FAQ'}" ng-click="showSection('FAQ')">
                <i class="fa-solid fa-question"></i> FAQ's
            </div>
            <div class="bottom-nav">
                <div class="nav-item" ng-class="{active: selectedMenu === 'Profile'}" ng-click="showSection('Profile')">
                    <i class="fa-solid fa-user"></i> Profile
                </div>
                <div class="nav-item" ng-class="{active: selectedMenu === 'Logout'}" ng-click="logout()">
                    <i class="fa-solid fa-right-from-bracket"></i> Logout
                </div>
            </div>
        </div>
        <div class="main-content">
            <div class="header">
                <span><i class="fa-solid fa-bell"></i>&nbsp;&nbsp;{{contactName}}</span>
            </div>
             <!-- Added By Karthik -->
                <div ng-if="yearList.length > 0" style="margin-bottom: 10px; margin-top: 10px;">
                    <label style="margin-right: 8px; font-weight: 500;">Year:</label>
                    <select ng-model="selectedYear"
                        ng-options="y.Id as y.Name for y in yearList"
                        ng-change="onYearChange(selectedYear)"
                        style="padding: 6px 12px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px;">
                        <option value="">Select Year</option>
                    </select>
                </div>
                
            <div ng-if="selectedMenu === 'Programs'">
                <h2 ng-if="appliedPrograms.length > 0">In Progress</h2>
                <div class="card-grid">
                    <div class="program-card" ng-repeat="p in appliedPrograms">
                        <div class="program-icon">
                            <i class="{{p.icon}}"></i>
                        </div>
                        <div class="program-title">{{p.name}}</div>
                        <div class="program-title">{{p.PropName}}</div>
                        <div class="program-deadline">Application Deadline: {{p.deadline}}</div>
                        <div class="program-desc">{{p.desc}}</div>
                        <div class="btn-container">
                            <div class="btn" ng-click="redirectToForm(p)">View</div>
                        </div>
                    </div>
                </div>
                <h2 ng-if="allPrograms.length > 0">Call Year</h2>

                <div class="card-grid">
                    <div class="program-card" ng-repeat="p in allPrograms">
                        <div class="program-icon">
                            <i class="{{p.icon}}"></i>
                        </div>
                        <div class="program-title">{{p.name}}</div>
                        <div class="program-title">{{p.yearlyCall}}</div>
                        <div class="program-deadline">Application Deadline: {{p.deadline}}</div>
                        <div class="program-desc">{{p.desc}}</div>
                        <div class="btn-container">
                            <div class="btn"
                                ng-click="!p.isExpired && redirectToForm(p)"
                                ng-disabled="p.isExpired">
                                Apply
                            </div>
                            <div class="btn">Know More</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div ng-else="isLoading" style="background-color: #fff; overflow: auto; scrollbar-width: none; width: 100%;" ng-if="$root.isRoutedView">  
        <ng-view>
        </ng-view>
    </div>
    </div>
    </body>
</apex:page>